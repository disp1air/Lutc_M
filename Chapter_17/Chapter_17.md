В любом случае область видимости переменной всегда определяется местом, где ей было присвоено значение, и никакого
отношения не имеет к месту, откуда была вызвана функция.
Всякий раз, когда вызывается функция, создается новая локальная область видимости – то есть пространство имен, в котором находятся имена, определяемые внутри функции.

Если необходимо присвоить значение имени верхнего уровня в модуле, который вмещает функцию, это имя необходимо объявить внутри функции глобальным с помощью инструкции global. Если необходимо присвоить значение имени, которое находится в объемлющей инструкции def, в Python 3.0 это имя необходимо объявить внутри функции с помощью
инструкции nonlocal.

операции непосредственного изменения объектов не рассматривают имена как локальные – это свойственно только операци-
ям присваивания. Например, если имени L присвоен список, определенный на верхнем уровне в модуле, то такая инструкция, как L.append(X), внутри функции не будет классифицировать имя L как локальное, тогда как инструкция L
= X – будет. 